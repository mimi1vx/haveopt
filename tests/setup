. haveopt.sh

tool()
{
  local ex=0 p="${channels-}" os="${optspecs-}"
  haveopt $p $os -- "$@" || ex=$?
  dump $p
  return $ex
}

dump()
{
  # the isset trickery serves to distinguish between
  # set-and-empty vs unset parameters.
  local isset var val
  for var; do
    eval val="\"\${$var-}\""
    eval "isset=\${$var+<empty>}"
    printf "%s=%s\n" "$var" "${val:-$isset}"
  done
}
